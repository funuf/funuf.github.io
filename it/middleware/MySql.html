<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>归律诗书屋</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="/js/base.js"></script>
    <meta name="description" content="规律是什么，应该做什么">
    
    <link rel="preload" href="/assets/css/0.styles.732cfe5a.css" as="style"><link rel="preload" href="/assets/js/app.9098f2d6.js" as="script"><link rel="preload" href="/assets/js/2.f664f0df.js" as="script"><link rel="preload" href="/assets/js/83.a2da1a0a.js" as="script"><link rel="preload" href="/assets/js/10.f82cd603.js" as="script"><link rel="prefetch" href="/assets/js/100.0b017729.js"><link rel="prefetch" href="/assets/js/101.a32b7951.js"><link rel="prefetch" href="/assets/js/102.bc1b6c72.js"><link rel="prefetch" href="/assets/js/103.9f45dbec.js"><link rel="prefetch" href="/assets/js/104.c4d95740.js"><link rel="prefetch" href="/assets/js/11.f76fc40f.js"><link rel="prefetch" href="/assets/js/12.6944af50.js"><link rel="prefetch" href="/assets/js/13.b89150ac.js"><link rel="prefetch" href="/assets/js/14.1501f817.js"><link rel="prefetch" href="/assets/js/15.4ef0f2a7.js"><link rel="prefetch" href="/assets/js/16.120197c6.js"><link rel="prefetch" href="/assets/js/17.0e60bb83.js"><link rel="prefetch" href="/assets/js/18.2318b5c9.js"><link rel="prefetch" href="/assets/js/19.8bdd7690.js"><link rel="prefetch" href="/assets/js/20.4a833638.js"><link rel="prefetch" href="/assets/js/21.94094807.js"><link rel="prefetch" href="/assets/js/22.43cb76f6.js"><link rel="prefetch" href="/assets/js/23.c4100de5.js"><link rel="prefetch" href="/assets/js/24.13a694fe.js"><link rel="prefetch" href="/assets/js/25.73e7c270.js"><link rel="prefetch" href="/assets/js/26.cec4157b.js"><link rel="prefetch" href="/assets/js/27.3e6f7d78.js"><link rel="prefetch" href="/assets/js/28.50860f22.js"><link rel="prefetch" href="/assets/js/29.dade73f8.js"><link rel="prefetch" href="/assets/js/3.6afeda28.js"><link rel="prefetch" href="/assets/js/30.e415a951.js"><link rel="prefetch" href="/assets/js/31.245e1ff8.js"><link rel="prefetch" href="/assets/js/32.1c58c318.js"><link rel="prefetch" href="/assets/js/33.2a35dc80.js"><link rel="prefetch" href="/assets/js/34.928df80d.js"><link rel="prefetch" href="/assets/js/35.7caf1f6b.js"><link rel="prefetch" href="/assets/js/36.eef51210.js"><link rel="prefetch" href="/assets/js/37.daa3f442.js"><link rel="prefetch" href="/assets/js/38.eeffb529.js"><link rel="prefetch" href="/assets/js/39.95683b9b.js"><link rel="prefetch" href="/assets/js/4.7d1e3a27.js"><link rel="prefetch" href="/assets/js/40.7f72a5a5.js"><link rel="prefetch" href="/assets/js/41.d9074d14.js"><link rel="prefetch" href="/assets/js/42.efdc1f95.js"><link rel="prefetch" href="/assets/js/43.4d868b19.js"><link rel="prefetch" href="/assets/js/44.39f49c28.js"><link rel="prefetch" href="/assets/js/45.fed4a64f.js"><link rel="prefetch" href="/assets/js/46.81f4a3ca.js"><link rel="prefetch" href="/assets/js/47.a3bf6707.js"><link rel="prefetch" href="/assets/js/48.c6d93e94.js"><link rel="prefetch" href="/assets/js/49.8746a81f.js"><link rel="prefetch" href="/assets/js/5.2a0c43dc.js"><link rel="prefetch" href="/assets/js/50.7d5ec5b6.js"><link rel="prefetch" href="/assets/js/51.95b7c204.js"><link rel="prefetch" href="/assets/js/52.00a09d16.js"><link rel="prefetch" href="/assets/js/53.9524084e.js"><link rel="prefetch" href="/assets/js/54.1a8cc05a.js"><link rel="prefetch" href="/assets/js/55.71782b73.js"><link rel="prefetch" href="/assets/js/56.b947061b.js"><link rel="prefetch" href="/assets/js/57.11a9393e.js"><link rel="prefetch" href="/assets/js/58.c8fbf621.js"><link rel="prefetch" href="/assets/js/59.625314bf.js"><link rel="prefetch" href="/assets/js/6.c059e3e4.js"><link rel="prefetch" href="/assets/js/60.1ec17786.js"><link rel="prefetch" href="/assets/js/61.d4981987.js"><link rel="prefetch" href="/assets/js/62.d9540377.js"><link rel="prefetch" href="/assets/js/63.7ce35e41.js"><link rel="prefetch" href="/assets/js/64.48918d7f.js"><link rel="prefetch" href="/assets/js/65.407e96f4.js"><link rel="prefetch" href="/assets/js/66.6997bec9.js"><link rel="prefetch" href="/assets/js/67.c5e5f86c.js"><link rel="prefetch" href="/assets/js/68.ee64232e.js"><link rel="prefetch" href="/assets/js/69.dc92dff3.js"><link rel="prefetch" href="/assets/js/7.cf1c6bc8.js"><link rel="prefetch" href="/assets/js/70.7e22b5d4.js"><link rel="prefetch" href="/assets/js/71.15065321.js"><link rel="prefetch" href="/assets/js/72.3386bac8.js"><link rel="prefetch" href="/assets/js/73.fb724b18.js"><link rel="prefetch" href="/assets/js/74.9a692a0b.js"><link rel="prefetch" href="/assets/js/75.202da1fd.js"><link rel="prefetch" href="/assets/js/76.70c1c8f8.js"><link rel="prefetch" href="/assets/js/77.70291f3f.js"><link rel="prefetch" href="/assets/js/78.b7cd50b7.js"><link rel="prefetch" href="/assets/js/79.3d7eb8e2.js"><link rel="prefetch" href="/assets/js/8.ff8ef414.js"><link rel="prefetch" href="/assets/js/80.ce8dffd6.js"><link rel="prefetch" href="/assets/js/81.c34c3904.js"><link rel="prefetch" href="/assets/js/82.9414052b.js"><link rel="prefetch" href="/assets/js/84.589d3fe4.js"><link rel="prefetch" href="/assets/js/85.40a5ab61.js"><link rel="prefetch" href="/assets/js/86.03d4caec.js"><link rel="prefetch" href="/assets/js/87.5bfbb8de.js"><link rel="prefetch" href="/assets/js/88.d63f9a15.js"><link rel="prefetch" href="/assets/js/89.31f30592.js"><link rel="prefetch" href="/assets/js/9.46c773a8.js"><link rel="prefetch" href="/assets/js/90.82e6bbde.js"><link rel="prefetch" href="/assets/js/91.e6ef02dd.js"><link rel="prefetch" href="/assets/js/92.485a3afc.js"><link rel="prefetch" href="/assets/js/93.80da4442.js"><link rel="prefetch" href="/assets/js/94.69591e93.js"><link rel="prefetch" href="/assets/js/95.b233d915.js"><link rel="prefetch" href="/assets/js/96.8205937d.js"><link rel="prefetch" href="/assets/js/97.420c1537.js"><link rel="prefetch" href="/assets/js/98.41c37eae.js"><link rel="prefetch" href="/assets/js/99.51e246dc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.732cfe5a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="归律诗书屋" class="logo"> <span class="site-name can-hide">归律诗书屋</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/it/" class="nav-link router-link-active">
  编程
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  万卷书
</a></div><div class="nav-item"><a href="/poetry/" class="nav-link">
  格律诗
</a></div><div class="nav-item"><a href="/meitu/" class="nav-link">
  美图
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用" class="dropdown-title"><span class="title">常用</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用" class="mobile-dropdown-title"><span class="title">常用</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.bing.com/?mkt=zh-CN&amp;mkt=zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  必应
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://translate.google.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Google翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stock.tuchong.com/topic?topicId=50044&amp;from=Adobe%E7%8B%AC%E5%AE%B6" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图虫
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.zhouzhiyuan.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  周志远
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://baiyunju.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  白云居
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人" class="dropdown-title"><span class="title">个人</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人" class="mobile-dropdown-title"><span class="title">个人</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/misc/2022.html" class="nav-link">
  思记
</a></li><li class="dropdown-item"><!----> <a href="/misc/口语表达.html" class="nav-link">
  口语表达
</a></li><li class="dropdown-item"><!----> <a href="/life/UnusualThinking.html" class="nav-link">
  二般思维
</a></li><li class="dropdown-item"><!----> <a href="/misc/AboutMe.html" class="nav-link">
  狼与羊
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/it/" class="nav-link router-link-active">
  编程
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  万卷书
</a></div><div class="nav-item"><a href="/poetry/" class="nav-link">
  格律诗
</a></div><div class="nav-item"><a href="/meitu/" class="nav-link">
  美图
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用" class="dropdown-title"><span class="title">常用</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用" class="mobile-dropdown-title"><span class="title">常用</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.bing.com/?mkt=zh-CN&amp;mkt=zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  必应
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://translate.google.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Google翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stock.tuchong.com/topic?topicId=50044&amp;from=Adobe%E7%8B%AC%E5%AE%B6" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图虫
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.zhouzhiyuan.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  周志远
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://baiyunju.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  白云居
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人" class="dropdown-title"><span class="title">个人</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人" class="mobile-dropdown-title"><span class="title">个人</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/misc/2022.html" class="nav-link">
  思记
</a></li><li class="dropdown-item"><!----> <a href="/misc/口语表达.html" class="nav-link">
  口语表达
</a></li><li class="dropdown-item"><!----> <a href="/life/UnusualThinking.html" class="nav-link">
  二般思维
</a></li><li class="dropdown-item"><!----> <a href="/misc/AboutMe.html" class="nav-link">
  狼与羊
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>不只是编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>中间件</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/it/middleware/MySql.html" aria-current="page" class="active sidebar-link">SQL·MySql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#存储引擎" class="sidebar-link">存储引擎</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#创建索引的原则" class="sidebar-link">创建索引的原则</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#数据库三范式" class="sidebar-link">数据库三范式</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#数据库事务" class="sidebar-link">数据库事务</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#存储过程" class="sidebar-link">存储过程</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#应对并发的策略" class="sidebar-link">应对并发的策略</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#数据库锁" class="sidebar-link">数据库锁</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#数据库分表" class="sidebar-link">数据库分表</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#druid" class="sidebar-link">Druid</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#依赖" class="sidebar-link">依赖</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#datasource注入" class="sidebar-link">DataSource注入</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#监控中心" class="sidebar-link">监控中心</a></li></ul></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#进入mysql" class="sidebar-link">进入mysql</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#最大连接数" class="sidebar-link">最大连接数</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#常见问题" class="sidebar-link">常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#navicat-报错-1030-get-error-28-from-storage-engine" class="sidebar-link">navicat 报错：1030 get error 28 from storage engine</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#_1040-is-blocked-because-of-many-connection-errors" class="sidebar-link">1040 is blocked because of many connection errors</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#unknown-variable-max-connections-75-when-trying-to-start-mysql" class="sidebar-link">&quot;unknown variable 'max_connections=75'&quot; when trying to start mysql</a></li><li class="sidebar-sub-header"><a href="/it/middleware/MySql.html#com-alibaba-druid-pool-getconnectiontimeoutexception-wait-millis-60000-active-20-maxactive-20" class="sidebar-link">com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 60000, active 20, maxActive 20</a></li></ul></li></ul></li><li><a href="/it/micro_services/SkyWalking.html" class="sidebar-link">ORM·MyBatis</a></li><li><a href="/it/middleware/Ehcache.html" class="sidebar-link">缓存·Ehcache</a></li><li><a href="/it/middleware/Redis.html" class="sidebar-link">键值NoSql·Redis</a></li><li><a href="/it/micro_services/SkyWalking.html" class="sidebar-link">文档Nosql·Mongodb</a></li><li><a href="/it/micro_services/SkyWalking.html" class="sidebar-link">全文检索·ElasticSearch</a></li><li><a href="/it/micro_services/SkyWalking.html" class="sidebar-link">进程协调·Zookeeper</a></li><li><a href="/it/micro_services/SkyWalking.html" class="sidebar-link">消息队列·Kafka</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DevOps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>领域模型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工具箱</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="https://pangniao.net/page/7/" target="_blank" rel="noopener noreferrer" class="sidebar-link">胖鸟<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/it/tool/科学上网.html" class="sidebar-link">科学上网</a></li><li><a href="https://www.youhou8.com/users/max/scripts" target="_blank" rel="noopener noreferrer" class="sidebar-link">油猴<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="https://www.liantu.com/?123=http://qcsd-web-dev.oss-cn-qingdao.aliyuncs.com/" target="_blank" rel="noopener noreferrer" class="sidebar-link">二维码生成<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>数据库是软件开发中必不可少的组件，无论是关系型数据库MySQL、Oracle，还是NoSQL数据库Redis、MongoDB，都针对不同的应用场景解决不同的问题。</p> <h2 id="存储引擎"><a href="#存储引擎" class="header-anchor">#</a> 存储引擎</h2> <p>数据库的存储引擎是数据库的底层软件组织，数据库管理系统（DBMS）使用存储引擎创建、查询、更新和删除数据。</p> <p>常用的存储引擎主要有MyISAM、InnoDB、Memory。</p> <p><strong>MyIASM</strong></p> <p>MyIASM是MySQL默认的存储引擎，不支持数据库事务、行级锁和外键，因此在INSERT（插入）或UPDATE（更新）数据即写操作时需要锁定整个表，效率较低。</p> <p>MyIASM的特点是执行读取操作的速度快，且占用的内存和存储资源较少。</p> <p>总体来说，MyIASM的缺点是更新数据慢且不支持事务处理，优点是查询速度快。</p> <p><strong>InnoDB</strong></p> <p>InnoDB 为 MySQL 提 供 了 事 务 （ Transaction ） 支 持 、 回 滚（Rollback）、崩溃修复能力（Crash Recovery Capabilities）、事务安全
（Transaction-safe）的操作。InnoDB的底层存储结构为B+树，B+树的每个节点都对应InnoDB的一个Page，Page大小是固定的，一般被设为16KB。其中，非叶子节点只有键值，叶子节点包含完整的数据，</p> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/mysql/innodb.png"></div> <p><strong>Memory</strong></p> <p>Memory表使用内存空间创建。每个Memory表实际上都对应一个磁盘文件用于持久化。Memory表因为数据是存放在内存中的，因此访问速度非常快，通常使用Hash索引来实现数据索引。Memory表的缺点是一旦服务关闭，表中的数据就会丢失。</p> <h2 id="创建索引的原则"><a href="#创建索引的原则" class="header-anchor">#</a> 创建索引的原则</h2> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/mysql/index.png"></div> <h2 id="数据库三范式"><a href="#数据库三范式" class="header-anchor">#</a> 数据库三范式</h2> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/mysql/pattern1.png"></div> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/mysql/pattern2.png"></div> <h2 id="数据库事务"><a href="#数据库事务" class="header-anchor">#</a> 数据库事务</h2> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/mysql/tx.png"></div> <h2 id="存储过程"><a href="#存储过程" class="header-anchor">#</a> 存储过程</h2> <p>存储过程指一组用于完成特定功能的SQL语句集，它被存储在数据 库中，经过第一次编译后再次调用时不需要被再次编译，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行 它。</p> <p>存储过程是数据库中的一个重要对象，我们可以基于存储过程快 速完成复杂的计算操作。</p> <h2 id="应对并发的策略"><a href="#应对并发的策略" class="header-anchor">#</a> 应对并发的策略</h2> <p>数据库的并发控制一般采用三种方法实现，分别是乐观锁、悲观锁及时间戳。</p> <ol><li>乐观锁 乐观锁在读数据时，认为别人不会去写其所读的数据；悲观锁就 刚好相反，觉得自己读数据时，别人可能刚好在写自己刚读的数据， 态度比较保守；时间戳在操作数据时不加锁，而是通过时间戳来控制并发出现的问题。</li> <li>悲观锁 悲观锁指在其修改某条数据时，不允许别人读取该数据，直到自 己的整个事务都提交并释放锁，其他用户才能访问该数据。悲观锁又可分为排它锁（写锁）和共享锁（读锁）。</li> <li>时间戳 时间戳指在数据库表中额外加一个时间戳列TimeStamp。每次读数 据时，都把时间戳也读出来，在更新数据时把时间戳加 1，在提交之 前跟数据库的该字段比较一次，如果比数据库的值大，就允许保存，
否则不允许保存。这种处理方法虽然不使用数据库系统提供的锁机 制，但是可以大大提高数据库处理的并发量。</li></ol> <h2 id="数据库锁"><a href="#数据库锁" class="header-anchor">#</a> 数据库锁</h2> <ol><li>行级锁</li></ol> <p>行级锁指对某行数据加锁，是一种排他锁，防止其他事务修改此行。在执行以下数据库操作时，数据库会自动应用行级锁。</p> <p>◎ INSERT 、 UPDATE 、 DELETE 、 SELECT … FOR UPDATE [OF columns] [WAIT n|NOWAIT]。</p> <p>◎ SELECT … FOR UPDATE语句允许用户一次针对多条记录执行更新。</p> <p>◎ 使用COMMIT或ROLLBACK语句释放锁。</p> <ol start="2"><li>表级锁</li></ol> <p>表级锁指对当前操作的整张表加锁，它的实现简单，资源消耗较 少，被大部分存储引擎支持。最常使用的MyISAM与InnoDB都支持表级 锁定。表级锁定分为表共享读锁（共享锁）与表独占写锁（排他锁）。</p> <ol start="3"><li>页级锁</li></ol> <p>页级锁的锁定粒度介于行级锁和表级锁之间。表级锁的加锁速度 快，但冲突多，行级冲突少，但加锁速度慢。页级锁在二者之间做了平衡，一次锁定相邻的一组记录。</p> <p>4.基于Redis的分布式锁（锁超时的时间不容易确定）</p> <p>数据库锁是基于单个数据库实现的，在我们的业务跨多个数据库 时，就要使用分布式锁来保证数据的一致性。</p> <p>下面介绍使用Redis实现 一个分布式锁的流程。 Redis实现的分布式锁以Redis setnx命令为中心实现 ， setnx 是 Redis 的 写 入 操 作 命 令 ， 具 体 语 法 为 setnx(key val)。
在且仅在key不存在时，则插入一个key为val的字符串，返回1；若key存在，则什么都不做，返回0。通过setnx实现分布式锁的思路如下。</p> <p>◎ 获取锁：在获取锁时调用setnx，如果返回 0，则该锁正在被别人使用；如果返回1，则成功获取锁。</p> <p>◎ 释放锁：在释放锁时，判断锁是否存在，如果存在，则执行Redis的delete操作释放锁。</p> <p>简单的Redis实现分布式锁的代码如下，注意，如果锁并发比较 大，则可以设置一个锁的超时时间，在超时时间到后，Redis会自动释放锁给其他线程使用：</p> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/mysql/redis_lock.png"></div> <h2 id="数据库分表"><a href="#数据库分表" class="header-anchor">#</a> 数据库分表</h2> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/mysql/sub.png"></div> <h2 id="druid"><a href="#druid" class="header-anchor">#</a> Druid</h2> <p>Druid（发音：丢的）是阿里巴巴开源的一款性能优秀的数据库连接池，同时扩展了SQL监控的相关功能。</p> <h3 id="依赖"><a href="#依赖" class="header-anchor">#</a> 依赖</h3> <div class="language-xml extra-class"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--mysql--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

    <span class="token comment">&lt;!--    连接池--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--   或者druid与springboot整合--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h3> <h4 id="jdbc-properties"><a href="#jdbc-properties" class="header-anchor">#</a> jdbc.properties</h4> <div class="language-text extra-class"><pre class="language-text"><code># JDBC
# MySQL 8.x com.mysql.cj.jdbc.Driver
jdbc.driverClass=com.mysql.jdbc.Driver
jdbc.connectionURL=jdbc:mysql://xxxx
jdbc.username=root
jdbc.password=123456

# JDBC Pool
jdbc.pool.init=1
jdbc.pool.minIdle=3
jdbc.pool.maxActive=20

# JDBC Test
jdbc.testSql=SELECT 'x' FROM DUAL 
</code></pre></div><h4 id="yml"><a href="#yml" class="header-anchor">#</a> .yml</h4> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
        <span class="token key atrule">type</span><span class="token punctuation">:</span> com.alibaba.druid.pool.DruidDataSource
        <span class="token key atrule">driverClassName</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
        <span class="token key atrule">druid</span><span class="token punctuation">:</span>
            <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//aaa.bbb.ccc.ddd<span class="token punctuation">:</span>3306/qcsd<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=utf-8&amp;serverTimezone=UTC&amp;useSSL=false</span>
            <span class="token key atrule">username</span><span class="token punctuation">:</span> root
            <span class="token key atrule">password</span><span class="token punctuation">:</span> xxx
            <span class="token comment"># 初始化大小</span>
            <span class="token key atrule">initial-size</span><span class="token punctuation">:</span> <span class="token number">3</span>
            <span class="token comment"># pool 最大值</span>
            <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">10</span>
            <span class="token comment"># pool 最小值</span>
            <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">3</span>
            <span class="token comment"># 配置获取连接等待超时的时间</span>
            <span class="token key atrule">max-wait</span><span class="token punctuation">:</span> <span class="token number">60000</span>
            <span class="token comment"># 打开PSCache，并且指定每个连接上PSCache的大小</span>
            <span class="token key atrule">pool-prepared-statements</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
            <span class="token key atrule">max-pool-prepared-statement-per-connection-size</span><span class="token punctuation">:</span> <span class="token number">20</span>
            <span class="token comment"># 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒</span>
            <span class="token key atrule">time-between-eviction-runs-millis</span><span class="token punctuation">:</span> <span class="token number">60000</span>
            <span class="token comment"># 配置一个连接在池中最小生存的时间，单位是毫秒</span>
            <span class="token key atrule">min-evictable-idle-time-millis</span><span class="token punctuation">:</span> <span class="token number">300000</span>
            <span class="token comment">#validation-query: SELECT 1 FROM DUAL</span>
            <span class="token key atrule">test-while-idle</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
            <span class="token key atrule">test-on-borrow</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
            <span class="token key atrule">test-on-return</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
            <span class="token key atrule">stat-view-servlet</span><span class="token punctuation">:</span>
                <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
                <span class="token key atrule">url-pattern</span><span class="token punctuation">:</span> /druid/*
                <span class="token key atrule">login-username</span><span class="token punctuation">:</span> xxx
                <span class="token key atrule">login-password</span><span class="token punctuation">:</span> yyy
            <span class="token key atrule">filter</span><span class="token punctuation">:</span>
                <span class="token key atrule">stat</span><span class="token punctuation">:</span>
                    <span class="token key atrule">log-slow-sql</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
                    <span class="token key atrule">slow-sql-millis</span><span class="token punctuation">:</span> <span class="token number">1000</span>
                    <span class="token key atrule">merge-sql</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
                <span class="token key atrule">wall</span><span class="token punctuation">:</span>
                    <span class="token key atrule">config</span><span class="token punctuation">:</span>
                        <span class="token key atrule">multi-statement-allow</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><h3 id="datasource注入"><a href="#datasource注入" class="header-anchor">#</a> DataSource注入</h3> <p>如果使用SpringBoot的AutoConfigure的话，这一步就可以省了。</p> <p>否则需要给SpringBoot容器中注入<code>DataSource</code></p> <h3 id="监控中心"><a href="#监控中心" class="header-anchor">#</a> 监控中心</h3> <p>Druid提供了大量的监控数据，只需要在<code>web.xml</code>中配置一个<code>Servlet</code>就可以方便地查看这些信息。</p> <p>修改<code>web.xml</code>配置文件，增加Druid提供的<code>Servlet</code>。</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>DruidStatView<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.alibaba.druid.support.http.StatViewServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>DruidStatView<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/druid/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>打开浏览器，输入： <code>http://192.168.3.110:30999/base/druid/login.html</code> 浏览器显示效果如下：</p> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/mysql/druid-stat.png"></div> <h2 id="进入mysql"><a href="#进入mysql" class="header-anchor">#</a> 进入mysql</h2> <div class="language-shell extra-class"><pre class="language-shell"><code>mysql -hlocalhsot -uroot -p

<span class="token comment"># 查看数据库 以分号结尾</span>
show databases<span class="token punctuation">;</span>
</code></pre></div><h2 id="最大连接数"><a href="#最大连接数" class="header-anchor">#</a> 最大连接数</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 修改最大连接数</span>
<span class="token function">whereis</span> my.cnf
<span class="token function">vim</span> /etc/my.cnf
</code></pre></div><div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/mysql/mysql-max-connections.png"></div> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <h3 id="navicat-报错-1030-get-error-28-from-storage-engine"><a href="#navicat-报错-1030-get-error-28-from-storage-engine" class="header-anchor">#</a> navicat 报错：1030 get error 28 from storage engine</h3> <p>解决方案：磁盘不够，使用<code>docker system prune</code>清理镜像即可。</p> <h3 id="_1040-is-blocked-because-of-many-connection-errors"><a href="#_1040-is-blocked-because-of-many-connection-errors" class="header-anchor">#</a> 1040 is blocked because of many connection errors</h3> <p>连接数过多，解决方案：增加连接数/重启mysql</p> <h3 id="unknown-variable-max-connections-75-when-trying-to-start-mysql"><a href="#unknown-variable-max-connections-75-when-trying-to-start-mysql" class="header-anchor">#</a> &quot;unknown variable 'max_connections=75'&quot; when trying to start mysql</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">whereis</span> my.cnf
<span class="token function">vim</span> /etc/my.cnf
</code></pre></div><p>Please edit [mysql] to [mysqld] and start mysql</p> <h3 id="com-alibaba-druid-pool-getconnectiontimeoutexception-wait-millis-60000-active-20-maxactive-20"><a href="#com-alibaba-druid-pool-getconnectiontimeoutexception-wait-millis-60000-active-20-maxactive-20" class="header-anchor">#</a> com.alibaba.druid.pool.GetConnectionTimeoutException: wait millis 60000, active 20, maxActive 20</h3> <p><a href="https://blog.csdn.net/weixin_44299027/article/details/104339164" target="_blank" rel="noopener noreferrer">修改druid的最大连接数，并进行超时回收<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6 days ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/it/java/算法.html" class="prev">
        算法
      </a></span> <span class="next"><a href="/it/micro_services/SkyWalking.html">
        ORM·MyBatis
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.9098f2d6.js" defer></script><script src="/assets/js/2.f664f0df.js" defer></script><script src="/assets/js/83.a2da1a0a.js" defer></script><script src="/assets/js/10.f82cd603.js" defer></script>
  </body>
</html>
