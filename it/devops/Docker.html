<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>软件列表 | 归律诗书屋</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script src="/js/base.js"></script>
    <meta name="description" content="规律是什么，应该做什么">
    
    <link rel="preload" href="/assets/css/0.styles.732cfe5a.css" as="style"><link rel="preload" href="/assets/js/app.9098f2d6.js" as="script"><link rel="preload" href="/assets/js/2.f664f0df.js" as="script"><link rel="preload" href="/assets/js/46.81f4a3ca.js" as="script"><link rel="preload" href="/assets/js/10.f82cd603.js" as="script"><link rel="prefetch" href="/assets/js/100.0b017729.js"><link rel="prefetch" href="/assets/js/101.a32b7951.js"><link rel="prefetch" href="/assets/js/102.bc1b6c72.js"><link rel="prefetch" href="/assets/js/103.9f45dbec.js"><link rel="prefetch" href="/assets/js/104.c4d95740.js"><link rel="prefetch" href="/assets/js/11.f76fc40f.js"><link rel="prefetch" href="/assets/js/12.6944af50.js"><link rel="prefetch" href="/assets/js/13.b89150ac.js"><link rel="prefetch" href="/assets/js/14.1501f817.js"><link rel="prefetch" href="/assets/js/15.4ef0f2a7.js"><link rel="prefetch" href="/assets/js/16.120197c6.js"><link rel="prefetch" href="/assets/js/17.0e60bb83.js"><link rel="prefetch" href="/assets/js/18.2318b5c9.js"><link rel="prefetch" href="/assets/js/19.8bdd7690.js"><link rel="prefetch" href="/assets/js/20.4a833638.js"><link rel="prefetch" href="/assets/js/21.94094807.js"><link rel="prefetch" href="/assets/js/22.43cb76f6.js"><link rel="prefetch" href="/assets/js/23.c4100de5.js"><link rel="prefetch" href="/assets/js/24.13a694fe.js"><link rel="prefetch" href="/assets/js/25.73e7c270.js"><link rel="prefetch" href="/assets/js/26.cec4157b.js"><link rel="prefetch" href="/assets/js/27.3e6f7d78.js"><link rel="prefetch" href="/assets/js/28.50860f22.js"><link rel="prefetch" href="/assets/js/29.dade73f8.js"><link rel="prefetch" href="/assets/js/3.6afeda28.js"><link rel="prefetch" href="/assets/js/30.e415a951.js"><link rel="prefetch" href="/assets/js/31.245e1ff8.js"><link rel="prefetch" href="/assets/js/32.1c58c318.js"><link rel="prefetch" href="/assets/js/33.2a35dc80.js"><link rel="prefetch" href="/assets/js/34.928df80d.js"><link rel="prefetch" href="/assets/js/35.7caf1f6b.js"><link rel="prefetch" href="/assets/js/36.eef51210.js"><link rel="prefetch" href="/assets/js/37.daa3f442.js"><link rel="prefetch" href="/assets/js/38.eeffb529.js"><link rel="prefetch" href="/assets/js/39.95683b9b.js"><link rel="prefetch" href="/assets/js/4.7d1e3a27.js"><link rel="prefetch" href="/assets/js/40.7f72a5a5.js"><link rel="prefetch" href="/assets/js/41.d9074d14.js"><link rel="prefetch" href="/assets/js/42.efdc1f95.js"><link rel="prefetch" href="/assets/js/43.4d868b19.js"><link rel="prefetch" href="/assets/js/44.39f49c28.js"><link rel="prefetch" href="/assets/js/45.fed4a64f.js"><link rel="prefetch" href="/assets/js/47.a3bf6707.js"><link rel="prefetch" href="/assets/js/48.c6d93e94.js"><link rel="prefetch" href="/assets/js/49.8746a81f.js"><link rel="prefetch" href="/assets/js/5.2a0c43dc.js"><link rel="prefetch" href="/assets/js/50.7d5ec5b6.js"><link rel="prefetch" href="/assets/js/51.95b7c204.js"><link rel="prefetch" href="/assets/js/52.00a09d16.js"><link rel="prefetch" href="/assets/js/53.9524084e.js"><link rel="prefetch" href="/assets/js/54.1a8cc05a.js"><link rel="prefetch" href="/assets/js/55.71782b73.js"><link rel="prefetch" href="/assets/js/56.b947061b.js"><link rel="prefetch" href="/assets/js/57.11a9393e.js"><link rel="prefetch" href="/assets/js/58.c8fbf621.js"><link rel="prefetch" href="/assets/js/59.625314bf.js"><link rel="prefetch" href="/assets/js/6.c059e3e4.js"><link rel="prefetch" href="/assets/js/60.1ec17786.js"><link rel="prefetch" href="/assets/js/61.d4981987.js"><link rel="prefetch" href="/assets/js/62.d9540377.js"><link rel="prefetch" href="/assets/js/63.7ce35e41.js"><link rel="prefetch" href="/assets/js/64.48918d7f.js"><link rel="prefetch" href="/assets/js/65.407e96f4.js"><link rel="prefetch" href="/assets/js/66.6997bec9.js"><link rel="prefetch" href="/assets/js/67.c5e5f86c.js"><link rel="prefetch" href="/assets/js/68.ee64232e.js"><link rel="prefetch" href="/assets/js/69.dc92dff3.js"><link rel="prefetch" href="/assets/js/7.cf1c6bc8.js"><link rel="prefetch" href="/assets/js/70.7e22b5d4.js"><link rel="prefetch" href="/assets/js/71.15065321.js"><link rel="prefetch" href="/assets/js/72.3386bac8.js"><link rel="prefetch" href="/assets/js/73.fb724b18.js"><link rel="prefetch" href="/assets/js/74.9a692a0b.js"><link rel="prefetch" href="/assets/js/75.202da1fd.js"><link rel="prefetch" href="/assets/js/76.70c1c8f8.js"><link rel="prefetch" href="/assets/js/77.70291f3f.js"><link rel="prefetch" href="/assets/js/78.b7cd50b7.js"><link rel="prefetch" href="/assets/js/79.3d7eb8e2.js"><link rel="prefetch" href="/assets/js/8.ff8ef414.js"><link rel="prefetch" href="/assets/js/80.ce8dffd6.js"><link rel="prefetch" href="/assets/js/81.c34c3904.js"><link rel="prefetch" href="/assets/js/82.9414052b.js"><link rel="prefetch" href="/assets/js/83.a2da1a0a.js"><link rel="prefetch" href="/assets/js/84.589d3fe4.js"><link rel="prefetch" href="/assets/js/85.40a5ab61.js"><link rel="prefetch" href="/assets/js/86.03d4caec.js"><link rel="prefetch" href="/assets/js/87.5bfbb8de.js"><link rel="prefetch" href="/assets/js/88.d63f9a15.js"><link rel="prefetch" href="/assets/js/89.31f30592.js"><link rel="prefetch" href="/assets/js/9.46c773a8.js"><link rel="prefetch" href="/assets/js/90.82e6bbde.js"><link rel="prefetch" href="/assets/js/91.e6ef02dd.js"><link rel="prefetch" href="/assets/js/92.485a3afc.js"><link rel="prefetch" href="/assets/js/93.80da4442.js"><link rel="prefetch" href="/assets/js/94.69591e93.js"><link rel="prefetch" href="/assets/js/95.b233d915.js"><link rel="prefetch" href="/assets/js/96.8205937d.js"><link rel="prefetch" href="/assets/js/97.420c1537.js"><link rel="prefetch" href="/assets/js/98.41c37eae.js"><link rel="prefetch" href="/assets/js/99.51e246dc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.732cfe5a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.jpg" alt="归律诗书屋" class="logo"> <span class="site-name can-hide">归律诗书屋</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/it/" class="nav-link router-link-active">
  编程
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  万卷书
</a></div><div class="nav-item"><a href="/poetry/" class="nav-link">
  格律诗
</a></div><div class="nav-item"><a href="/meitu/" class="nav-link">
  美图
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用" class="dropdown-title"><span class="title">常用</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用" class="mobile-dropdown-title"><span class="title">常用</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.bing.com/?mkt=zh-CN&amp;mkt=zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  必应
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://translate.google.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Google翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stock.tuchong.com/topic?topicId=50044&amp;from=Adobe%E7%8B%AC%E5%AE%B6" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图虫
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.zhouzhiyuan.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  周志远
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://baiyunju.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  白云居
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人" class="dropdown-title"><span class="title">个人</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人" class="mobile-dropdown-title"><span class="title">个人</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/misc/2022.html" class="nav-link">
  思记
</a></li><li class="dropdown-item"><!----> <a href="/misc/口语表达.html" class="nav-link">
  口语表达
</a></li><li class="dropdown-item"><!----> <a href="/life/UnusualThinking.html" class="nav-link">
  二般思维
</a></li><li class="dropdown-item"><!----> <a href="/misc/AboutMe.html" class="nav-link">
  狼与羊
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/it/" class="nav-link router-link-active">
  编程
</a></div><div class="nav-item"><a href="/book/" class="nav-link">
  万卷书
</a></div><div class="nav-item"><a href="/poetry/" class="nav-link">
  格律诗
</a></div><div class="nav-item"><a href="/meitu/" class="nav-link">
  美图
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用" class="dropdown-title"><span class="title">常用</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用" class="mobile-dropdown-title"><span class="title">常用</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.bing.com/?mkt=zh-CN&amp;mkt=zh-CN" target="_blank" rel="noopener noreferrer" class="nav-link external">
  必应
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://translate.google.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Google翻译
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://stock.tuchong.com/topic?topicId=50044&amp;from=Adobe%E7%8B%AC%E5%AE%B6" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图虫
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.zhouzhiyuan.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  周志远
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://baiyunju.cc/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  白云居
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="个人" class="dropdown-title"><span class="title">个人</span> <span class="arrow down"></span></button> <button type="button" aria-label="个人" class="mobile-dropdown-title"><span class="title">个人</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/misc/2022.html" class="nav-link">
  思记
</a></li><li class="dropdown-item"><!----> <a href="/misc/口语表达.html" class="nav-link">
  口语表达
</a></li><li class="dropdown-item"><!----> <a href="/life/UnusualThinking.html" class="nav-link">
  二般思维
</a></li><li class="dropdown-item"><!----> <a href="/misc/AboutMe.html" class="nav-link">
  狼与羊
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>不只是编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>中间件</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>DevOps</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/it/devops/Maven.html" class="sidebar-link">Maven</a></li><li><a href="/it/devops/Git.html" class="sidebar-link">Git</a></li><li><a href="/it/devops/Nginx.html" class="sidebar-link">Nginx</a></li><li><a href="/it/devops/Windows.html" class="sidebar-link">Windows</a></li><li><a href="/it/devops/Linux.html" class="sidebar-link">Linux</a></li><li><a href="/it/devops/Linux-CentOS.html" class="sidebar-link">Linux-CentOS</a></li><li><a href="/it/devops/Linux-Ubuntu.html" class="sidebar-link">Linux-Ubuntu</a></li><li><a href="/it/devops/Docker.html" aria-current="page" class="active sidebar-link">Docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#软件列表" class="sidebar-link">软件列表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#wordpress" class="sidebar-link">WordPress</a></li></ul></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#概述" class="sidebar-link">概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#背景" class="sidebar-link">背景</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#优势" class="sidebar-link">优势</a></li></ul></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#概念" class="sidebar-link">概念</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#引擎" class="sidebar-link">引擎</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#架构" class="sidebar-link">架构</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#镜像" class="sidebar-link">镜像</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#容器" class="sidebar-link">容器</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#仓库-镜像托管平台" class="sidebar-link">仓库（镜像托管平台）</a></li></ul></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#ubuntu" class="sidebar-link">Ubuntu</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#centos" class="sidebar-link">CentOS</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#镜像加速" class="sidebar-link">镜像加速</a></li></ul></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#镜像基础" class="sidebar-link">镜像基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#下载" class="sidebar-link">下载</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#删除" class="sidebar-link">删除</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#联合文件系统" class="sidebar-link">联合文件系统</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#镜像体积" class="sidebar-link">镜像体积</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#虚悬镜像" class="sidebar-link">虚悬镜像</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#中间层镜像" class="sidebar-link">中间层镜像</a></li></ul></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#镜像构建" class="sidebar-link">镜像构建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#build-context" class="sidebar-link">Build Context</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#dockerfile" class="sidebar-link">Dockerfile</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#from" class="sidebar-link">FROM</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#run" class="sidebar-link">RUN</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#workdir" class="sidebar-link">WORKDIR</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#copy-add" class="sidebar-link">COPY ADD</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#cmd" class="sidebar-link">CMD</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#expose" class="sidebar-link">EXPOSE</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#env" class="sidebar-link">ENV</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#volume" class="sidebar-link">VOLUME</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#entrypoint" class="sidebar-link">ENTRYPOINT</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#build命令" class="sidebar-link">build命令</a></li></ul></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#volume-2" class="sidebar-link">Volume</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#网络" class="sidebar-link">网络</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#linux网络虚拟化" class="sidebar-link">Linux网络虚拟化</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#桥接模式" class="sidebar-link">桥接模式</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#docker0" class="sidebar-link">Docker0</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#veth-pair" class="sidebar-link">veth-pair</a></li></ul></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#docker-compose" class="sidebar-link">Docker Compose</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#安装-2" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#docker-compose-yml" class="sidebar-link">docker-compose.yml</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#命令" class="sidebar-link">命令</a></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#网络-2" class="sidebar-link">网络</a></li></ul></li><li class="sidebar-sub-header"><a href="/it/devops/Docker.html#参考" class="sidebar-link">参考</a></li></ul></li><li><a href="/it/devops/Kubernetes.html" class="sidebar-link">Kubernetes</a></li><li><a href="/it/devops/Jenkins.html" class="sidebar-link">Jenkins</a></li><li><a href="/it/devops/DingRobot.html" class="sidebar-link">钉钉机器人</a></li><li><a href="/it/devops/内网穿透.html" class="sidebar-link">内网穿透</a></li><li><a href="https://chenpipi.cn/post/yaml-all-in-one/" target="_blank" rel="noopener noreferrer" class="sidebar-link">YAML<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/it/devops/XaaS.html" class="sidebar-link">XaaS</a></li><li><a href="/it/devops/Port.html" class="sidebar-link">端口</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Android</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>领域模型</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工具箱</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="https://pangniao.net/page/7/" target="_blank" rel="noopener noreferrer" class="sidebar-link">胖鸟<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="/it/tool/科学上网.html" class="sidebar-link">科学上网</a></li><li><a href="https://www.youhou8.com/users/max/scripts" target="_blank" rel="noopener noreferrer" class="sidebar-link">油猴<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li><a href="https://www.liantu.com/?123=http://qcsd-web-dev.oss-cn-qingdao.aliyuncs.com/" target="_blank" rel="noopener noreferrer" class="sidebar-link">二维码生成<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="软件列表"><a href="#软件列表" class="header-anchor">#</a> 软件列表</h2> <h3 id="wordpress"><a href="#wordpress" class="header-anchor">#</a> WordPress</h3> <p><a href="/it/devops/docker-compose/Wordpress">WordPress--传送门</a></p> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>Java：一次编译，到处运行</p> <p>Docker（容器化部署）：真正实现一次编译，到处运行</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> --help
<span class="token function">docker</span> version
<span class="token function">docker</span> pull
<span class="token function">docker</span> rmi
<span class="token function">docker</span> run
<span class="token function">docker</span> <span class="token function">ps</span>
<span class="token function">docker</span> <span class="token function">rm</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span>
<span class="token function">docker</span> build
</code></pre></div><h3 id="背景"><a href="#背景" class="header-anchor">#</a> 背景</h3> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/docker/docker1.png"></div> <p>VM虚拟机技术：虚拟出一套硬件后，在其上运行一个完整的操作系统。</p> <p>Docker容器技术：容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，也没有进行硬件的虚拟。</p> <p>VM中的进程能够使用的资源受给vm分配的上限所限，Docker中的进行能够充分使用宿主机的所有资源（CPU/内存）。</p> <p>因此Docker技术比虚拟机技术更为轻便、快捷。</p> <p>Docker使用的分层存储以及镜像技术，使得应用重复部分的复用更加容易。</p> <h3 id="优势"><a href="#优势" class="header-anchor">#</a> 优势</h3> <ol><li>更高效的利用系统资源</li> <li>更快的启动时间</li> <li>一致的运行环境</li> <li>持续交付和部署</li> <li>更轻松的迁移</li> <li>更轻松的维护和扩展</li></ol> <h2 id="概念"><a href="#概念" class="header-anchor">#</a> 概念</h2> <h3 id="引擎"><a href="#引擎" class="header-anchor">#</a> 引擎</h3> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/docker/docker_engine.png"></div> <h3 id="架构"><a href="#架构" class="header-anchor">#</a> 架构</h3> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/docker/docker_architecture.png"></div> <h3 id="镜像"><a href="#镜像" class="header-anchor">#</a> 镜像</h3> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/docker/docker_image.png"></div> <h3 id="容器"><a href="#容器" class="header-anchor">#</a> 容器</h3> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/docker/docker_container.png"></div> <h3 id="仓库-镜像托管平台"><a href="#仓库-镜像托管平台" class="header-anchor">#</a> 仓库（镜像托管平台）</h3> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/docker/docker_registry.png"></div> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p><a href="https://docs.docker.com/engine/install/" target="_blank" rel="noopener noreferrer">官网安装<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>检查是否安装</strong></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> version
</code></pre></div><h3 id="ubuntu"><a href="#ubuntu" class="header-anchor">#</a> Ubuntu</h3> <p><strong>脚本安装</strong>（适用于CentOS）</p> <div class="language-shell extra-class"><pre class="language-shell"><code> <span class="token function">curl</span> -fsSL https://get.docker.com -o get-docker.sh
 <span class="token function">sudo</span> <span class="token function">sh</span> get-docker.sh --mirror Aliyun
 
 <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
 <span class="token function">sudo</span> systemctl start <span class="token function">docker</span>
</code></pre></div><h3 id="centos"><a href="#centos" class="header-anchor">#</a> CentOS</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 1. 卸载旧版本</span>
 <span class="token function">sudo</span> yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine
                  
<span class="token comment"># 2. 需要的安装包</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> -y yum-utils
 
<span class="token comment"># 3. 设置镜像仓库</span>
<span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    https://download.docker.com/linux/centos/docker-ce.repo <span class="token comment"># 默认是国外地址</span>
    
<span class="token function">sudo</span> yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo <span class="token comment"># 阿里云镜像</span>
    
<span class="token comment"># 4. 更新yum软件包索引</span>
<span class="token function">sudo</span> yum makecache fast
 
<span class="token comment"># 5. 安装Docker  docker-ce 社区版   ee企业版</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
 
<span class="token comment"># 6. 启动docker</span>
systemctl start <span class="token function">docker</span>

<span class="token comment"># 7. 使用docker version查看是否安装成功</span>
<span class="token function">docker</span> version

<span class="token punctuation">[</span>root@qcsd-ecs-dev-001 ~<span class="token punctuation">]</span><span class="token comment"># docker version</span>
Client: Docker Engine - Community
 Version:           <span class="token number">19.03</span>.11
 API version:       <span class="token number">1.40</span>
 Go version:        go1.13.10
 Git commit:        42e35e61f3
 Built:             Mon Jun  <span class="token number">1</span> 09:13:48 <span class="token number">2020</span>
 OS/Arch:           linux/amd64
 Experimental:      <span class="token boolean">false</span>

Server: Docker Engine - Community
 Engine:
  Version:          <span class="token number">19.03</span>.11
  API version:      <span class="token number">1.40</span> <span class="token punctuation">(</span>minimum version <span class="token number">1.12</span><span class="token punctuation">)</span>
  Go version:       go1.13.10
  Git commit:       42e35e61f3
  Built:            Mon Jun  <span class="token number">1</span> 09:12:26 <span class="token number">2020</span>
  OS/Arch:          linux/amd64
  Experimental:     <span class="token boolean">false</span>
 containerd:
  Version:          <span class="token number">1.2</span>.13
  GitCommit:        7ad184331fa3e55e52b890ea95e65ba581ae3429
 runc:
  Version:          <span class="token number">1.0</span>.0-rc10
  GitCommit:        dc9208a3303feef5b3839f4323d9beb36df0a9dd
 docker-init:
  Version:          <span class="token number">0.18</span>.0
  GitCommit:        fec3683

<span class="token comment"># 8. hello-world程序</span>
<span class="token function">docker</span> run hello-world

<span class="token comment"># 9. 查看hello-world镜像</span>
<span class="token punctuation">[</span>root@qcsd-ecs-dev-001 ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY                                             TAG                 IMAGE ID            CREATED             SIZE
registry.cn-qingdao.aliyuncs.com/qcsd/tpns             latest              b5994daf8bb4        <span class="token number">44</span> hours ago        317MB

<span class="token comment"># 10. 卸载Docker</span>

<span class="token comment"># 1. 卸载依赖</span>
 <span class="token function">sudo</span> yum remove docker-ce docker-ce-cli containerd.io
 
<span class="token comment"># 2. 删除资源</span>
 <span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/lib/docker
 <span class="token function">sudo</span> <span class="token function">rm</span> -rf /var/lib/containerd
</code></pre></div><h3 id="镜像加速"><a href="#镜像加速" class="header-anchor">#</a> 镜像加速</h3> <p>提升获取Docker官方镜像的速度</p> <h4 id="编辑文件"><a href="#编辑文件" class="header-anchor">#</a> 编辑文件</h4> <p>于<code>/etc/docker/daemon.json</code>中写入：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://registry.docker-cn.com&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre></div><h4 id="命令式"><a href="#命令式" class="header-anchor">#</a> 命令式</h4> <p>在阿里云控制台搜索  容器镜像服务--镜像工具--镜像加速器</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> -p /etc/docker
<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://ftc7wwc6.mirror.aliyuncs.com&quot;]
}
EOF</span>
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre></div><h2 id="镜像基础"><a href="#镜像基础" class="header-anchor">#</a> 镜像基础</h2> <h3 id="下载"><a href="#下载" class="header-anchor">#</a> 下载</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> image pull --help
<span class="token function">docker</span> pull --help
</code></pre></div><p>从下载过程中可以看出镜像是由多层存储构成的，下载也是一层一层，并非单一文件。</p> <p>下载过程中给出了每一层的ID的前12位，下载结束后，给出该镜像的完整的sha256的摘要，以确保下载一致性。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hellofun@hellofun-Deepin:~$ <span class="token function">docker</span> run -it --rm <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> ubuntu:16.04 <span class="token punctuation">\</span>
<span class="token operator">&gt;</span> <span class="token function">bash</span>

</code></pre></div><h3 id="删除"><a href="#删除" class="header-anchor">#</a> 删除</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> rmi
<span class="token function">docker</span> image <span class="token function">rm</span> 镜像id<span class="token operator">|</span>镜像名:标签<span class="token operator">|</span>
<span class="token function">docker</span> image <span class="token function">rm</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> image <span class="token function">ls</span> -q redis<span class="token variable">)</span></span>
</code></pre></div><h3 id="联合文件系统"><a href="#联合文件系统" class="header-anchor">#</a> 联合文件系统</h3> <p>联合文件系统（UnionFS）是一种轻量级的高性能分层文件系统，它支持将文件系统的修改信息作为一次提交，并层层叠加，
同时可以将不同目录挂载到同一个虚拟文件系统下，应用看到的是挂载的最终结果。</p> <p>联合文件系统是实现Docker镜像的技术基础，Docker镜像可以通过分层来进行继承。</p> <h3 id="镜像体积"><a href="#镜像体积" class="header-anchor">#</a> 镜像体积</h3> <p>Docker Hub 中显示的体积是压缩后的体积。在镜像上传和下载过程中镜像是保持着压缩状态的。</p> <p>而docker image ls 显示的是镜像下载到本地后，解压缩后的大小。</p> <p>另外，docker image ls列表中的镜像体积总和并非是所有镜像实际的硬盘小号，由于Docker使用UnionFS，相同的层只需要保存一份即可，因此实际的硬盘占用比列表之和要小的多。</p> <p>所有的镜像和容器都存储在Docker指定的存储目录下，默认路径是/var/lib/docker。</p> <h3 id="虚悬镜像"><a href="#虚悬镜像" class="header-anchor">#</a> 虚悬镜像</h3> <p>虚悬镜像（dangling image） ，即没有仓库名，也没有标签的镜像。</p> <p>原来的镜像名称和标签被新下载（pull latest）/新构建（build 同版本）的最新镜像占用了，原来的镜像就成了虚悬镜像。一般来说，虚悬镜像已经失去了存在的价值。</p> <p>使用 <code>docker image ls -f dangling=true</code>进行查看；使用 <code>docker image prune</code>进行删除。</p> <h3 id="中间层镜像"><a href="#中间层镜像" class="header-anchor">#</a> 中间层镜像</h3> <p>为了加速镜像构建、重复利用资源，Docker会利用中间层镜像。</p> <p>默认的docker image ls列表只会显示顶层镜像，如果需要显示包括中间层镜像的所有镜像的话，需要docker image ls -a 会看到很多无标签的镜像。</p> <p>与虚悬镜像不同，这些无标签的镜像很多都是中间层镜像，被其他的镜像所依赖。因此这些无标签镜像不应该删除也不用删除。</p> <h2 id="镜像构建"><a href="#镜像构建" class="header-anchor">#</a> 镜像构建</h2> <p><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/" target="_blank" rel="noopener noreferrer">官网指导<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="build-context"><a href="#build-context" class="header-anchor">#</a> Build Context</h3> <p>Docker Client 会把build context 发送给Docker Daemon。</p> <p><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#understand-build-context" target="_blank" rel="noopener noreferrer">构建上下文<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> Dockerfile</h3> <p>Dockerfile是一个文本文件，其内容包含了一条条指令（Instruction），每一条指令构建一层，因此每一条指令的内容，就是描述该层应当如何构建。</p> <h3 id="from"><a href="#from" class="header-anchor">#</a> <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#from" target="_blank" rel="noopener noreferrer">FROM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>除了选择现有镜像为基础镜像之外，Docker还存在一个特殊的镜像，名为scratch，它表示一个空白的镜像。</p> <p>如果以scratch作为基础镜像，则意味着不以任何镜像为基础，接下来所写的指令作为镜像第一层开始存在。</p> <h3 id="run"><a href="#run" class="header-anchor">#</a> <a href="https://docs.docker.com/engine/reference/builder/#run" target="_blank" rel="noopener noreferrer">RUN<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>两种写法：shell格式和exec格式</p> <p>RUN命令会在启动容器，并执行命令，命令执行后的结果将会被commit，后续步骤将基于本次RUN的结果。</p> <blockquote><p>The RUN instruction will execute any commands in a new layer on top of the current image and commit the results.</p> <p>The resulting committed image will be used for the next step in the Dockerfile.</p></blockquote> <p>因此，如果在使用Dockerfile构建镜像时，若RUN指令失败，则会出现docker虚悬镜像和该虚悬镜像的container。</p> <h3 id="workdir"><a href="#workdir" class="header-anchor">#</a> <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#workdir" target="_blank" rel="noopener noreferrer">WORKDIR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>使用WORKDIR指令可以来指定工作目录（或称之为当前目录），以后各层的当前目录被改为指定的目录。如果目录不存在，则WORKDIR 会创建目录。</p> <p>在Shell中，连续两行是同一个进程执行环境，因此前一个命令修改的内存状态会直接影响后一个命令。</p> <p>而Dockerfile中，每个命令对应新的一层，连续两个RUN不可能继承前一层构建过程中的内存变化。</p> <p>因此要使用WORKDIR指令改变后续各层的工作目录的位置。</p> <h3 id="copy-add"><a href="#copy-add" class="header-anchor">#</a> <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#add-or-copy" target="_blank" rel="noopener noreferrer">COPY ADD<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>COPY：文件复制</p> <p>ADD：压缩包自动解压；支持远程文件（URL）</p> <h3 id="cmd"><a href="#cmd" class="header-anchor">#</a> <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#cmd" target="_blank" rel="noopener noreferrer">CMD<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>在容器中启动一个软件，一个Dockerfile文件中只能有一个CMD指令。</p> <blockquote><p>run the software contained in your image, along with any arguments.</p> <p>There can only be one CMD instruction in a Dockerfile. If you list more than one CMD then only the last CMD will take effect.</p></blockquote> <h3 id="expose"><a href="#expose" class="header-anchor">#</a> <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#expose" target="_blank" rel="noopener noreferrer">EXPOSE<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>指定容器监听的端口。</p> <p>The EXPOSE instruction indicates the ports on which a container listens for connections.</p> <h3 id="env"><a href="#env" class="header-anchor">#</a> <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#env" target="_blank" rel="noopener noreferrer">ENV<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>设置环境变量，后续部分指令可以展开环境变量（使用自己定义的环境变量的值）</p> <p>-p 宿主端口:容器端口</p> <p>-P 随机映射宿主机的端口 到 容器端口</p> <blockquote><p>To make new software easier to run, you can use ENV to update the PATH environment variable for the software your container installs.</p> <p>For example, ENV PATH=/usr/local/nginx/bin:$PATH ensures that CMD [&quot;nginx&quot;] just works.</p> <p>The ENV instruction sets the environment variable key to the value .</p> <p>This value will be in the environment for all subsequent instructions in the build stage and can be replaced inline in many as well.</p></blockquote> <h3 id="volume"><a href="#volume" class="header-anchor">#</a> <a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/#volume" target="_blank" rel="noopener noreferrer">VOLUME<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>定义匿名数据卷：指定容器中的特定目录，会被持久化到宿主机上。</p> <p><a href="https://www.cnblogs.com/51kata/p/5266626.html" target="_blank" rel="noopener noreferrer">说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="entrypoint"><a href="#entrypoint" class="header-anchor">#</a> <a href="https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact" target="_blank" rel="noopener noreferrer">ENTRYPOINT<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>ENTRYPOINT 和 CMD 都用于为容器启动后指定默认的程序入口</p> <p>命令行参数（docker run xxx携带的参数）：</p> <ol><li>会追加到ENTRYPOINT的末尾</li> <li>会替换掉CMD</li> <li>如果ENTRYPOINT和CMD同时存在，后者将作为前者的参数</li></ol> <p><a href="https://www.cnblogs.com/sparkdev/p/8461576.html" target="_blank" rel="noopener noreferrer">ENTRYPOINT与CMD的区别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="build命令"><a href="#build命令" class="header-anchor">#</a> build命令</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> build -t namexxx:tagxxx <span class="token builtin class-name">.</span>
<span class="token function">docker</span> build -t namexxx:tagxxx -f pathxxx/Dockerfile
</code></pre></div><div class="language-text extra-class"><pre class="language-text"><code>FROM tomcat
WORKDIR /usr/local/tomcat/webapps/ROOT/
RUN rm -rf *
RUN echo &quot;Hello Docker&quot; &gt; index.html
</code></pre></div><h2 id="volume-2"><a href="#volume-2" class="header-anchor">#</a> Volume</h2> <p>容器内指定目录的<a href="https://docs.docker.com/get-started/05_persisting_data/" target="_blank" rel="noopener noreferrer">持久化技术<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 。</p> <p>所有的docker容器内的卷，在没有指定目录的情况下，在宿主的<code>/var/lib/docker/volumes/xxx/_data</code>目录。</p> <p>使用数据卷的三种姿势：</p> <ol><li>匿名</li> <li>具名</li> <li>宿主目录</li></ol> <p><a href="https://www.cnblogs.com/51kata/p/5266626.html" target="_blank" rel="noopener noreferrer">说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="网络"><a href="#网络" class="header-anchor">#</a> 网络</h2> <p>Docker的网络系统是 <a href="https://docs.docker.com/network/#network-drivers" target="_blank" rel="noopener noreferrer">插件化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的，可用的网络驱动大致可分为：</p> <ol><li>默认桥接：宿主机与容器不再同一个网段</li> <li>用户创建的桥接：常用，支持DNS解析（根据机器名进行互相访问）及其他<a href="https://docs.docker.com/network/bridge/#differences-between-user-defined-bridges-and-the-default-bridge" target="_blank" rel="noopener noreferrer">优势<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>host：与宿主机不存在网络个例</li> <li>overlay：跨宿主机的容器之间的通信，如docker swarm（少用）</li> <li>ipvlan：少用</li> <li>macvlan：少用</li> <li>third-party network plugin</li></ol> <h3 id="linux网络虚拟化"><a href="#linux网络虚拟化" class="header-anchor">#</a> Linux网络虚拟化</h3> <p>Docker的本地网络实现其实就是利用了Linux上的网络命名空间和虚拟网络设备（特别是veth pair）。</p> <p>直观上看，要实现网络通信，机器上需要至少一个网络接口（物理接口或虚拟接口）与外界相通，并可以收发数据包；此外，如果不同子网之间需要通信，还需要额外的路由转发控制。</p> <p>Docker中的网络接口默认都是虚拟接口。虚拟接口的最大优势就是转发效率极高。</p> <p>这是因为Linux通过在内核中进行数据复制来实现虚拟接口之间的数据转发：即发送接口的发送缓存中的数据将被直接复制到接收接口的接收缓存中，
而无需通过外部物理网络设备进行交换。</p> <p>对于本地系统和容器内系统来看，虚拟接口跟一个正常的以太网卡相比并无区别，只是它的速度要快的多。</p> <div><img src="https://gitlab.com/funuf/vuepress-blog-oss/raw/master/img/docker/docker0.jpg"></div> <p>网络创建过程：</p> <ol><li>Docker创建一个容器的时候，会创建一对虚拟接口，分别放到本地主机和新容器的命名空间中</li> <li>本地主机一端的虚拟接口连接到默认的docker0网桥（或指定网桥上），并具有一个以veth开头的唯一名字，如veth1234</li> <li>容器一端的虚拟接口将放在新建的容器中，并修改名字为eth0，这个接口只在容器的命名空间可见</li> <li>从网桥可用地址段中获取一个空闲地址分配给容器的eth0，并配置容器内的默认 路由网关为docker0网卡的内部接口docker0的IP地址</li> <li>完成上述步骤后，容器就可以使用它所能看到的eth0虚拟网卡来连接其他容器和访问外部网络</li></ol> <h3 id="桥接模式"><a href="#桥接模式" class="header-anchor">#</a> 桥接模式</h3> <p>桥接网络适用于运行在同一Docker守护程序主机上的容器。对于在不同的Docker守护程序主机上运行的容器之间的通信，可以使用overlay模式。</p> <p>网桥在数据链路层上实现局域网互连，对接收的帧要先存储和查找站表，然后转发（这就增加了时延）。</p> <p>网桥也叫桥接器，是连接两个局域网的一种存储/转发设备，它能将一个大的LAN分割为多个网段，或将两个以上的LAN互联为一个逻辑LAN，使LAN上的所有用户都可访问服务器。</p> <p>网桥可以是专门硬件设备，也可以由计算机加装的网桥软件来实现，这时计算机上会安装多个网络适配器（网卡）。</p> <p>当使用网桥连接两段LAN时，网桥对来自网段1的MAC 帧，首先要检查其终点地址。如果该帧是发往网段1 上某一站的，网桥则不将帧转发到网段2 ，而将其滤除；如果该帧是发往网段2 上某一站的，网桥则将它转发到网段2。</p> <p>网桥工作在数据链路层，将两个LAN连起来，根据MAC地址来转发帧，可以看作一个“低层的路由器”（路由器工作在网络层，根据网络地址如IP地址进行转发）。</p> <p>数据链路层互联的设备是网桥(bridge)，在网络互联中它起到数据接收、地址过滤与数据转发的作用，用来实现多个网络系统之间的数据交换。</p> <p>在网络方面，桥网络是一种链路层设备，其在网段之间转发流量。桥梁可以是在主机内核中运行的硬件设备或软件设备。</p> <p>在Docker方面，桥接网络使用软件桥，该软件桥允许连接到同一桥网络的容器进行通信，同时提供从未连接到该桥网络的容器的隔离。</p> <h3 id="docker0"><a href="#docker0" class="header-anchor">#</a> Docker0</h3> <p>Docker服务启动时会首先在宿主机上自动创建一个docker0虚拟网桥，实际上是一个Linux网桥，它在内核层连通了其他的物理或虚拟网卡。</p> <p>网桥可以理解为一个软件交换机，负责不同网段之间的数据转发（负责挂载其上的接口之间进行包转发），物理网桥工作在数据链路层。</p> <p>同时，Docker随机分配一个本地未占用的私有网段中的一个地址给docker0接口。比如典型的172.17.0.0/16网段，掩码为255.255.0.0。此后启动的容器内的网络也会自动分配一个该网段的网址。</p> <p>当创建一个Docker容器的时候，同时会创建一对veth pair互联接口。当像任一个接口发送包时，另外一个接口自动收到相同的包。</p> <p>互联接口的一端位于容器内，即eth0；另一端在本地并被挂载到docker0网桥，名称yiveth开头。</p> <p>通过这种方式，主机可以与容器通信，容器之间也可以相互通信。如此一来，Docker就创建了在主机和所有容器之间的虚拟共享网络。</p> <h3 id="veth-pair"><a href="#veth-pair" class="header-anchor">#</a> veth-pair</h3> <p><a href="https://www.cnblogs.com/bjtime/p/10773490.html" target="_blank" rel="noopener noreferrer">详细说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://askingthelot.com/what-is-veth-pair/" target="_blank" rel="noopener noreferrer">1<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://askinglot.com/what-is-veth-pair" target="_blank" rel="noopener noreferrer">2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://man7.org/linux/man-pages/man4/veth.4.html" target="_blank" rel="noopener noreferrer">3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://www.packetcoders.io/virtual-networking-devices-tun-tap-and-veth-pairs-explained/" target="_blank" rel="noopener noreferrer">4<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://medium.com/@arpitkh96/basics-of-container-networking-with-linux-65607ea2377c#:~:text=VETH%20Pair%20between%20containers%3A%20This%20is%20one%20of,which%20we%20want%20to%20establish%20communication%20%28VETHN12%3C-%3EVETHN21%29.%20" target="_blank" rel="noopener noreferrer">5<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="docker-compose"><a href="#docker-compose" class="header-anchor">#</a> <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">Docker Compose<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>Docker官方的容器编排工具，用于定义和运行多个Docker容器的应用。即Docker容器的声明式管理技术（命令式管理太不方便），简化Docker指令的操作。</p> <p>Docker由go语言编写，Docker Compose由Python编写，实际上调用了Docker 提供的API来对容器进行管理。</p> <p>Docker Compose有两个重要的概念：</p> <ol><li>服务（service）：一个应用的容器，包含若干相同镜像的容器实例</li> <li>项目（project）：由一组关联的应用容器组成的一个完整业务单元</li></ol> <h3 id="安装-2"><a href="#安装-2" class="header-anchor">#</a> 安装</h3> <p><a href="https://docs.docker.com/compose/install/#install-compose-on-linux-systems" target="_blank" rel="noopener noreferrer">官方安装<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 下载</span>
<span class="token function">curl</span> -L https://get.daocloud.io/docker/compose/releases/download/1.27.4/docker-compose-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -s<span class="token variable">`</span></span>-<span class="token variable"><span class="token variable">`</span><span class="token function">uname</span> -m<span class="token variable">`</span></span> <span class="token operator">&gt;</span> /usr/local/bin/docker-compose
<span class="token comment"># 权限</span>
<span class="token function">sudo</span> <span class="token function">chmod</span> +x /usr/local/bin/docker-compose
<span class="token comment"># 软连接</span>
<span class="token function">sudo</span> <span class="token function">ln</span> -s /usr/local/bin/docker-compose /usr/bin/docker-compose
<span class="token comment"># 安装成功</span>
<span class="token function">docker-compose</span> --version
</code></pre></div><h3 id="docker-compose-yml"><a href="#docker-compose-yml" class="header-anchor">#</a> docker-compose.yml</h3> <p><a href="https://docs.docker.com/compose/compose-file/compose-file-v3/" target="_blank" rel="noopener noreferrer">编写指南<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>通过 <code>docker-compose config</code>可以对编写的docker-compose.yml文件进行验证</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&quot;3.9&quot;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>latest
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token key atrule">configs</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">source</span><span class="token punctuation">:</span> my_config
        <span class="token key atrule">target</span><span class="token punctuation">:</span> /redis_config
        <span class="token key atrule">uid</span><span class="token punctuation">:</span> <span class="token string">'103'</span>
        <span class="token key atrule">gid</span><span class="token punctuation">:</span> <span class="token string">'103'</span>
        <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token number">0440</span>
<span class="token key atrule">configs</span><span class="token punctuation">:</span>
  <span class="token key atrule">my_config</span><span class="token punctuation">:</span>
    <span class="token key atrule">file</span><span class="token punctuation">:</span> ./my_config.txt
  <span class="token key atrule">my_other_config</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre></div><h3 id="命令"><a href="#命令" class="header-anchor">#</a> 命令</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker-compose</span> --help
<span class="token function">docker-compose</span> up -d
<span class="token function">docker-compose</span> down
<span class="token function">docker-compose</span> logs -f
</code></pre></div><h3 id="网络-2"><a href="#网络-2" class="header-anchor">#</a> <a href="https://docs.docker.com/compose/networking/" target="_blank" rel="noopener noreferrer">网络<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>默认情况下，Compose会为应用程序设置单个网络。服务中的每个容器都会加入这个默认网络，并且既可由该网络上的其他容器到达，并在与容器名称相同的主机名中可被它们可发现。</p> <p>您的应用程序的网络是基于“项目名称”的名称，它基于它所存在的目录的名称。您可以使用--project-name标志或compose_project_name环境变量覆盖项目名称。</p> <p>除了使用默认的应用网络，可以使用networks指定自己的网络。这使您可以创建更复杂的拓扑并指定自定义网络驱动程序和选项。您还可以使用它来将服务连接到外部创建的网络，该网络无法由Compose管理。</p> <h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <p><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">官网--传送门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">4 days ago</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/it/devops/Linux-Ubuntu.html" class="prev">
        Linux-Ubuntu
      </a></span> <span class="next"><a href="/it/devops/Kubernetes.html">
        Kubernetes
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.9098f2d6.js" defer></script><script src="/assets/js/2.f664f0df.js" defer></script><script src="/assets/js/46.81f4a3ca.js" defer></script><script src="/assets/js/10.f82cd603.js" defer></script>
  </body>
</html>
